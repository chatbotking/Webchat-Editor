<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Custom Chat Interface</title>
<link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto|Open+Sans|Lato|Ubuntu&display=swap" rel="stylesheet">
<style>
:root {
    /* Colors */
    --primaryColor: #36d6b5;
    --secondaryColor: #ffffff;

    /* Font */
    --fontFamily: Helvetica, Arial, sans-serif;
    --fontWeight: bold;

    /* Header */
    --headerTextSize: 18px;
    --headerTextColor: #000;
    --headerBackgroundLayers: #36d6b5;
    --headerHeight: 60px;
    --headerTextAlign: center;
    --cornerStyle: 20px;
    --headerPaddingLeft: 20px;

    /* Chat Area */
    --chatAreaBackgroundColor: #f8f9fa;
    --chatAreaBackgroundImage: none;
    --chatAreaBackgroundPosition: center;
    --chatAreaBackgroundRepeat: no-repeat;
    --chatAreaBackgroundSize: cover;

    /* Messages */
    --messageTextSize: 14px;
    --messageCornerStyle: 20px;
    --botMessageTextColor: #212529;
    --botMessageBg: #eeeeee;
    --userMessageTextColor: #ffffff;
    --userMessageBg: #36d6b5;

    /* Avatar */
    --avatarSize: 50px;
    --avatarBorderColor: #36d6b5;
    --avatarImageURL: url("https://via.placeholder.com/50");
    --avatarDisplay: inline-block;
    --avatarShape: 50%;
    --otherMessagePaddingLeft: calc(50px + 10px);

    /* Chat Input */
    --chatInputBackground: #ffffff;
    --chatInputTextFieldBg: #f1f1f1;
    --chatInputTextFieldTextColor: #333333;
    --chatInputBorderRadius: 18px;
    --chatInputHeight: 80px;

    /* Icon Settings */
    --iconsDisplay: inline-block;

    /* Button Styles */
    --buttonTextSize: var(--messageTextSize);
    --buttonFontWeight: var(--fontWeight);
    --buttonPadding: 10px 20px;
}


body {
    background-color: var(--secondaryColor);
    font-family: Arial, sans-serif; /* Use a default font for controls */
    height: 100vh;
	margin-top: 7px;
}
.container {
    display: flex;
    height: 98vh;
	
}
.controls {
    width: 300px;
    background: var(--secondaryColor);
    padding: 20px;
    overflow-y: auto;
    border-right: 1px solid #e0e0e0;
    height: 100%;
}
.preview {
    flex: 1;
    background: var(--secondaryColor);
    display: flex;
    flex-direction: column;
    font-family: var(--fontFamily);
    height: 100%;
    overflow: hidden;
}

/* Sections */
.section {
    margin-bottom: 24px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
}
.section-title {
    display: flex;
    align-items: center;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    color: #2c3e50;
    padding: 15px;
    border-bottom: 1px solid #e0e0e0;
    background: #36d6b5;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
}
.section-title .toggle-icon {
    margin-right: 10px;
    font-weight: bold;
}
.section-content {
    padding: 15px;
    display: none; /* Start with sections closed */
}

/* Controls */
.control-group { margin-bottom: 12px; }
label {
    display: block;
    margin-bottom: 6px;
    font-size: 14px;
    color: #4a5568;
}
input, select, textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    margin-bottom: 8px;
    font-size: 14px;
}
input[type="color"] { height: 40px; padding: 0; }
input[type="checkbox"] {
    transform: scale(1.2);
    margin-right: 10px;
    vertical-align: middle;
}
.copy-button {
    width: 100%;
    padding: 10px;
    background: var(--primaryColor);
    color: var(--secondaryColor);
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.3s;
}
.copy-button:hover { background: #2ea590; }

.reset-button {
    width: 100%;
    padding: 10px;
    background: #e74c3c;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.3s;
    margin-top: 20px;
}
.reset-button:hover { background: #c0392b; }

/* Preview Area */
.chat-preview-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin: 20px;
    border-radius: var(--cornerStyle);
    overflow: hidden;
    box-shadow: 0 0px 6px 3px rgba(0, 0, 0, 0.2);
    position: relative;
    font-family: var(--fontFamily);
    height: calc(100% - 40px);
}
.chat-header {
    height: var(--headerHeight);
    padding: 0 20px;
    font-size: var(--headerTextSize);
    font-weight: 600;
    background: var(--headerBackgroundLayers);
    color: var(--headerTextColor);
    text-align: var(--headerTextAlign);
    display: flex;
    align-items: center;
    justify-content: var(--headerTextAlign);
    border-top-left-radius: var(--cornerStyle);
    border-top-right-radius: var(--cornerStyle);
    font-family: var(--fontFamily);
    padding-left: var(--headerPaddingLeft);
    position: relative;
}
.chat-area {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    line-height: 1.5;
    font-family: var(--fontFamily);
    background-color: var(--chatAreaBackgroundColor);
    background-image: var(--chatAreaBackgroundImage);
    background-position: var(--chatAreaBackgroundPosition);
    background-repeat: var(--chatAreaBackgroundRepeat);
    background-size: var(--chatAreaBackgroundSize);
}
.other-message {
    position: relative;
    margin-bottom: 15px;
    padding-left: var(--otherMessagePaddingLeft);
}
.other-message:before {
    content: "";
    display: var(--avatarDisplay);
    position: absolute;
    top: 0;
    left: 0;
    width: var(--avatarSize);
    height: var(--avatarSize);
    background-image: var(--avatarImageURL);
    background-size: cover;
    background-repeat: no-repeat;
    border-radius: var(--avatarShape);
    border: 3px solid var(--avatarBorderColor);
}
.other-message .message-text {
    background-color: var(--botMessageBg);
    color: var(--botMessageTextColor);
    font-size: var(--messageTextSize);
    border-radius: var(--messageCornerStyle);
    padding: 10px 15px;
    word-wrap: break-word;
    font-family: var(--fontFamily);
    margin-bottom: 5px;
}

/* User Message Styling */
.my-message {
    padding-right: 0;
    margin-bottom: 15px;
    position: relative;
}
.my-message .message-text {
    background-color: var(--userMessageBg) !important;
    color: var(--userMessageTextColor);
    font-size: var(--messageTextSize);
    border-radius: var(--messageCornerStyle);
    padding: 10px 15px;
    word-wrap: break-word;
    font-family: var(--fontFamily);
    margin-bottom: 5px;
    margin-top: 5vh;
}
/* Apply user text color to all child elements */
.my-message .message-text * {
    color: var(--userMessageTextColor) !important;
}
/* Apply bot text color to all child elements */
.other-message .message-text * {
    color: var(--botMessageTextColor);
}
/* Message Text Inheritance */
.message-text * {
    font-family: inherit;
}
/* Chat Input Styling */
.chat-input {
    height: var(--chatInputHeight);
    padding: 20px;
    background: var(--chatInputBackground);
    display: flex;
    align-items: center;
    width: 100%;
    box-sizing: border-box;
    font-family: var(--fontFamily);
}
.chat-input .input-group {
    flex: 1;
    border-radius: var(--chatInputBorderRadius) !important;
    background-color: var(--chatInputTextFieldBg) !important;
    overflow: hidden;
    position: relative;
    display: flex;
}
.chat-input input {
    width: 100%;
    padding: 12px;
    border: none;
    background-color: var(--chatInputTextFieldBg);
    color: var(--chatInputTextFieldTextColor);
    font-size: 14px;
    outline: none;
    box-sizing: border-box;
    flex: 1;
}
/* Success Message */
.success-message {
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #36D6B5;
    color: #fff;
    padding: 10px 20px;
    border-radius: 4px;
    font-size: 14px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    z-index: 1000;
}
/* Generated CSS Styles */
textarea#cssOutput {
    width: 100%;
    height: 200px;
    resize: vertical;
    font-family: monospace;
    font-size: 12px;
    padding: 10px;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    box-sizing: border-box;
    background-color: #f1f1f1;
    color: #333;
}
/* Hide icons in preview */
.chat-input .uploadBtt {
    display: none;
}
/* Added Styles for Consistent Buttons and Text */
/* Preformatted Text */
pre {
    color: var(--botMessageTextColor);
    line-height: 1.5;
    padding: 10px;
    font-weight: var(--buttonFontWeight);
    font-size: var(--messageTextSize);
    font-family: var(--fontFamily);
}
/* Ice Breaker Buttons */
.chat-ice-breaker {
    position: fixed;
    right: 20px;
    bottom: 80px; /* Moved up by 20px */
}
.chat-ice-breaker button {
    background-color: #FFF7FA;
    color: var(--botMessageTextColor);
    font-weight: var(--buttonFontWeight);
    font-size: var(--buttonTextSize);
    font-family: var(--fontFamily);
    padding: var(--buttonPadding);
    border-radius: 20px;
    transition: transform 0.2s ease, background-color 0.2s ease;
    border: none;
    cursor: pointer;
    margin: 5px 0;
}
.chat-ice-breaker button:hover {
    background-color: #f3e6e6;
    transform: scale(1.05);
}
/* Card Buttons */
.card-button {
    background: #E3F2FD;
    color: var(--botMessageTextColor);
    font-weight: var(--buttonFontWeight);
    font-size: var(--buttonTextSize);
    font-family: var(--fontFamily);
    padding: 10px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.2s ease, background-color 0.2s ease;
    margin: 5px 0;
}
.card-button:hover {
    background-color: #d0e7f8;
    transform: scale(1.05);
}
/* Additional CSS */
.chat-input .form-control {
    border-radius: 0 !important;
    border: none !important;
    background-color: var(--chatInputTextFieldBg) !important;
    color: var(--chatInputTextFieldTextColor) !important;
	background: var(--chatInputTextFieldBg) !important;
}
.chat-input .input-group{
        background-color: var(--chatInputTextFieldBg) !important;
    }

.input-group > .custom-select:not(:last-child),
.input-group > .form-control:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}
.chat-input .input-group {
    flex: 1;
    border-radius: var(--chatInputBorderRadius) !important;
    background-color: var(--chatInputTextFieldBg) !important;
    overflow: hidden;
    position: relative;
    display: flex;
}
</style>
</head>

<body>
    <div class="container">
        <div class="controls">
          <!-- Header Settings -->
    <div class="section">
        <div class="section-title">
            <span class="toggle-icon">+</span>
            Header Settings
        </div>
        <div class="section-content">
            <div class="control-group">
                <label for="headerTextSize">Header Text Size (px)</label>
                <input type="number" id="headerTextSize" value="18" min="12" max="36">
            </div>
            <div class="control-group">
                <label for="headerTextColor">Header Text Color</label>
                <input type="color" id="headerTextColor" value="#ffffff">
            </div>
            <div class="control-group">
                <label for="headerBackgroundType">Header Background Type</label>
                <select id="headerBackgroundType">
                    <option value="solid" selected>Solid</option>
                    <option value="gradient">Gradient</option>
                </select>
            </div>
            <div class="control-group" id="headerSolidColorGroup">
                <label for="headerBgSolid">Header Background Color</label>
                <input type="color" id="headerBgSolid" value="#36d6b5">
            </div>
            <div class="control-group" id="headerGradientGroup" style="display: none;">
                <label for="headerBgGradientStart">Gradient Start Color</label>
                <input type="color" id="headerBgGradientStart" value="#531ccf">
                <label for="headerBgGradientEnd">Gradient End Color</label>
                <input type="color" id="headerBgGradientEnd" value="#1abc9c">
                <label for="headerBgGradientDirection">Gradient Direction</label>
                <select id="headerBgGradientDirection">
                    <option value="to right" selected>To Right</option>
                    <option value="to bottom">To Bottom</option>
                    <option value="to left">To Left</option>
                    <option value="to top">To Top</option>
                    <option value="45deg">45 degrees</option>
                    <option value="135deg">135 degrees</option>
                </select>
            </div>
            <div class="control-group">
                <label for="headerHeight">Header Height (px)</label>
                <input type="number" id="headerHeight" value="60" min="40" max="150">
            </div>
            <div class="control-group">
                <label for="headerTextAlign">Text Alignment</label>
                <select id="headerTextAlign">
                    <option value="left">Left</option>
                    <option value="center" selected>Center</option>
                    <option value="right">Right</option>
                </select>
            </div>
            <div class="control-group">
                <label for="cornerStyle">Corner Style</label>
                <select id="cornerStyle">
                    <option value="0px">Straight</option>
                    <option value="20px" selected>Rounded</option>
                </select>
            </div>
            <div class="control-group">
                <label for="headerLogoURL">Header Logo URL</label>
                <input type="url" id="headerLogoURL" placeholder="https://example.com/logo.png">
            </div>
            <div class="control-group" id="headerLogoSizeGroup" style="display: none;">
                <label for="headerLogoWidth">Logo Width (px)</label>
                <input type="number" id="headerLogoWidth" value="40" min="10" max="200">
            </div>
            <div class="control-group" id="headerLogoPositionGroup" style="display: none;">
                <label for="headerLogoAlignment">Logo Alignment</label>
                <select id="headerLogoAlignment">
                    <option value="left" selected>Left</option>
                    <option value="center">Center</option>
                    <option value="right">Right</option>
                </select>
                <label for="headerLogoOffsetX">Logo X Offset (px)</label>
                <input type="number" id="headerLogoOffsetX" value="0">
                <label for="headerLogoOffsetY">Logo Y Offset (px)</label>
                <input type="number" id="headerLogoOffsetY" value="0">
            </div>
        </div>
    </div>
    
    <!-- Chat Area Settings -->

<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Chat Area Settings
    </div>
    <div class="section-content">
        <div class="control-group">
            <label for="chatAreaBackgroundType">Chat Area Background Type</label>
            <select id="chatAreaBackgroundType">
                <option value="solid" selected>Solid</option>
                <option value="gradient">Gradient</option>
                <option value="image">Image</option>
            </select>
        </div>
        <div class="control-group" id="chatAreaSolidColorGroup">
            <label for="chatAreaBgSolid">Chat Area Background Color</label>
            <input type="color" id="chatAreaBgSolid" value="#f8f9fa">
        </div>
        <div class="control-group" id="chatAreaGradientGroup" style="display: none;">
            <label for="chatAreaBgGradientStart">Gradient Start Color</label>
            <input type="color" id="chatAreaBgGradientStart" value="#f8f9fa">
            <label for="chatAreaBgGradientEnd">Gradient End Color</label>
            <input type="color" id="chatAreaBgGradientEnd" value="#e0e0e0">
            <label for="chatAreaBgGradientDirection">Gradient Direction</label>
            <select id="chatAreaBgGradientDirection">
                <option value="to right" selected>To Right</option>
                <option value="to bottom">To Bottom</option>
                <option value="to left">To Left</option>
                <option value="to top">To Top</option>
                <option value="45deg">45 degrees</option>
                <option value="135deg">135 degrees</option>
            </select>
        </div>
        <div class="control-group" id="chatAreaImageGroup" style="display: none;">
            <label for="chatAreaBgImageURL">Background Image URL</label>
            <input type="url" id="chatAreaBgImageURL" placeholder="https://example.com/image.jpg">
            <label for="chatAreaBgSize">Background Size</label>
            <select id="chatAreaBgSize">
                <option value="cover">Cover</option>
                <option value="contain">Contain</option>
                <option value="auto">Auto</option>
            </select>
            <label for="chatAreaBgRepeat">Background Repeat</label>
            <select id="chatAreaBgRepeat">
                <option value="no-repeat">No Repeat</option>
                <option value="repeat">Repeat</option>
                <option value="repeat-x">Repeat Horizontally</option>
                <option value="repeat-y">Repeat Vertically</option>
            </select>
        </div>
    </div>
</div>

<!-- Message Settings -->
<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Message Settings
    </div>
    <div class="section-content">
        <div class="control-group">
            <label for="messageTextSize">Message Text Size (px)</label>
            <input type="number" id="messageTextSize" value="14" min="12" max="24">
        </div>
        <div class="control-group">
            <label for="messageCornerStyle">Message Corner Style</label>
            <select id="messageCornerStyle">
                <option value="0px">Straight</option>
                <option value="20px" selected>Rounded</option>
            </select>
        </div>
        <div class="control-group">
            <label for="botMessageTextColor">Bot Message Text Color</label>
            <input type="color" id="botMessageTextColor" value="#212529">
        </div>
        <div class="control-group">
            <label for="botMessageBg">Bot Message Background</label>
            <input type="color" id="botMessageBg" value="#eeeeee">
        </div>
        <div class="control-group">
            <label for="userMessageTextColor">User Message Text Color</label>
            <input type="color" id="userMessageTextColor" value="#ffffff">
        </div>
        <div class="control-group">
            <label for="userMessageBg">User Message Background</label>
            <input type="color" id="userMessageBg" value="#36d6b5">
        </div>
    </div>
</div>

<!-- Font Settings -->
<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Font Settings
    </div>
    <div class="section-content">
        <div class="control-group">
            <label for="fontFamily">Font Family</label>
            <select id="fontFamily">
                <option value="Helvetica, Arial, sans-serif" selected>Helvetica</option>
                <option value="Arial, sans-serif">Arial</option>
                <option value="'Times New Roman', Times, serif">Times New Roman</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="'Courier New', Courier, monospace">Courier New</option>
                <option value="'Montserrat', sans-serif">Montserrat</option>
                <option value="'Roboto', sans-serif">Roboto</option>
                <option value="'Open Sans', sans-serif">Open Sans</option>
                <option value="'Lato', sans-serif">Lato</option>
                <option value="'Ubuntu', sans-serif">Ubuntu</option>
            </select>
        </div>
    </div>
</div>

<!-- Avatar Settings -->
<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Avatar Settings
    </div>
    <div class="section-content">
        <div class="control-group">
            <label>
                <input type="checkbox" id="showAvatar" checked>
                Show Avatar
            </label>
        </div>
        <div class="control-group">
            <label for="avatarSize">Avatar Size (px)</label>
            <input type="number" id="avatarSize" value="50" min="20" max="100">
        </div>
        <div class="control-group">
            <label for="avatarBorderColor">Avatar Border Color</label>
            <input type="color" id="avatarBorderColor" value="#36d6b5">
        </div>
        <!-- New Checkbox for Transparent Border -->
        <div class="control-group">
            <label>
                <input type="checkbox" id="avatarBorderTransparent" onchange="
                    const avatarBorderColor = document.getElementById('avatarBorderColor');
                    if (this.checked) {
                        document.documentElement.style.setProperty('--avatarBorderColor', 'unset');
                        avatarBorderColor.disabled = true; /* Disable color picker when transparent */
                    } else {
                        document.documentElement.style.setProperty('--avatarBorderColor', avatarBorderColor.value);
                        avatarBorderColor.disabled = false; /* Enable color picker when not transparent */
                    }
                    generateCSS(); /* Update generated CSS */
                    saveSettings(); /* Save current settings */
                ">
                Transparent Border
            </label>
        </div>
        <div class="control-group">
            <label for="avatarImageURL">Avatar Image URL</label>
            <input type="url" id="avatarImageURL" placeholder="https://example.com/avatar.jpg" value="https://via.placeholder.com/50">
        </div>
        <div class="control-group">
            <label for="avatarShape">Avatar Shape</label>
            <select id="avatarShape">
                <option value="50%">Circle</option>
                <option value="0%">Square</option>
            </select>
        </div>
    </div>
</div>

<!-- Icon Settings -->
<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Icon Settings
    </div>
    <div class="section-content">
        <div class="control-group">
            <label>
                <input type="checkbox" id="showIcons" checked>
                Show Microphone and Upload Icons
            </label>
        </div>
        <div class="control-group">
            <label>
                Icon Color:
                <input type="color" id="icon-color" value="#000000">
            </label>
        </div>
    </div>
</div>


<!-- Chat Input Settings -->
<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Chat Input Settings
    </div>
    <div class="section-content">
        <div class="control-group">
            <label for="chatInputBackgroundType">Chat Input Background Type</label>
            <select id="chatInputBackgroundType">
                <option value="solid" selected>Solid</option>
                <option value="gradient">Gradient</option>
            </select>
        </div>
        <div class="control-group" id="chatInputSolidColorGroup">
            <label for="chatInputBgSolid">Chat Input Background Color</label>
            <input type="color" id="chatInputBgSolid" value="#ffffff">
        </div>
        <div class="control-group" id="chatInputGradientGroup" style="display: none;">
            <label for="chatInputBgGradientStart">Chat Input Gradient Start Color</label>
            <input type="color" id="chatInputBgGradientStart" value="#ffffff">
            <label for="chatInputBgGradientEnd">Chat Input Gradient End Color</label>
            <input type="color" id="chatInputBgGradientEnd" value="#f1f1f1">
            <label for="chatInputBgGradientDirection">Gradient Direction</label>
            <select id="chatInputBgGradientDirection">
                <option value="to right" selected>To Right</option>
                <option value="to bottom">To Bottom</option>
                <option value="to left">To Left</option>
                <option value="to top">To Top</option>
                <option value="45deg">45°</option>
                <option value="135deg">135°</option>
            </select>
        </div>
        <div class="control-group">
            <label for="chatInputTextFieldBg">Text Field Background Color</label>
            <input type="color" id="chatInputTextFieldBg" value="#f1f1f1">
        </div>
        <div class="control-group">
            <label for="chatInputTextFieldTextColor">Text Field Text Color</label>
            <input type="color" id="chatInputTextFieldTextColor" value="#333333">
        </div>
        <div class="control-group">
            <label for="chatInputCornerStyle">Chat Input Corner Style</label>
            <select id="chatInputCornerStyle">
                <option value="0px">Straight</option>
                <option value="18px" selected>Rounded</option>
            </select>
        </div>
    </div>
</div>

<!-- Footer Settings -->
<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Footer Settings
    </div>
    <div class="section-content">
        <label>
            <input type="checkbox" id="footer-show"> Show Footer
        </label>
        <br>
        <label>
            Footer Text:
            <input type="text" id="footer-text" value="Powered by Chatbot Builder AI">
        </label>
        <br>
        <label>
            Footer Text Color:
            <input type="color" id="footer-text-color" value="#000">
        </label>
        <br>
        <label>
            Footer Font Size (px):
            <input type="number" id="footer-font-size" value="12">
        </label>
        <br>
        <label>
            Footer Font Family:
            <select id="footer-font-family">
                <option value="sans-serif" selected>Sans-serif</option>
                <option value="serif">Serif</option>
                <option value="monospace">Monospace</option>
            </select>
        </label>
        <br>
        <label>
            Footer Font Weight:
            <select id="footer-font-weight">
                <option value="normal" selected>Normal</option>
                <option value="bold">Bold</option>
                <option value="lighter">Lighter</option>
            </select>
        </label>
    </div>
</div>

<!-- Generated CSS -->
<div class="section">
    <div class="section-title">
        <span class="toggle-icon">+</span>
        Generated CSS
    </div>
    <div class="section-content">
        <textarea id="cssOutput" readonly></textarea>
        <button class="copy-button" onclick="copyCSS()">Copy CSS</button>
    </div>
</div>

<!-- Reset Button -->
<button class="reset-button" onclick="resetSettings()">Reset to Default</button>
</div>

<!-- Preview Area -->
<div class="preview">
    <div class="chat-preview-container">
        <div class="chat-header">Chat Interface</div>
        <div class="chat-area">
            <!-- Example Messages -->
            <div class="other-message">
                <div class="message-text">Hello! How can I assist you today?</div>
            </div>
            <div class="my-message">
                <div class="message-text">I have a question about your service.</div>
            </div>
        </div>
        <div class="chat-input">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Type your message...">
            </div>
        </div>
    </div>
</div>

<!-- Success Message -->
<div id="successMessage" class="success-message">CSS copied to clipboard!</div>
</div>




<script>
// Function to generate CSS based on current settings
function generateCSS() {
    const rootStyle = getComputedStyle(document.documentElement);
    let css = `:root{
        --primaryColor:${rootStyle.getPropertyValue('--primaryColor').trim()};
        --secondaryColor:${rootStyle.getPropertyValue('--secondaryColor').trim()};
        --fontFamily:${rootStyle.getPropertyValue('--fontFamily').trim()};
        --fontWeight:${rootStyle.getPropertyValue('--fontWeight').trim()};
        --headerTextSize:${rootStyle.getPropertyValue('--headerTextSize').trim()};
        --headerTextColor:${rootStyle.getPropertyValue('--headerTextColor').trim()};
        --headerBackgroundLayers:${rootStyle.getPropertyValue('--headerBackgroundLayers').trim()};
        --headerHeight:${rootStyle.getPropertyValue('--headerHeight').trim()};
        --headerTextAlign:${rootStyle.getPropertyValue('--headerTextAlign').trim()};
        --cornerStyle:${rootStyle.getPropertyValue('--cornerStyle').trim()};
        --headerPaddingLeft:${rootStyle.getPropertyValue('--headerPaddingLeft').trim()};
        --chatAreaBackgroundColor:${rootStyle.getPropertyValue('--chatAreaBackgroundColor').trim()};
        --chatAreaBackgroundImage:${rootStyle.getPropertyValue('--chatAreaBackgroundImage').trim()};
        --chatAreaBackgroundPosition:${rootStyle.getPropertyValue('--chatAreaBackgroundPosition').trim()};
        --chatAreaBackgroundRepeat:${rootStyle.getPropertyValue('--chatAreaBackgroundRepeat').trim()};
        --chatAreaBackgroundSize:${rootStyle.getPropertyValue('--chatAreaBackgroundSize').trim()};
        --messageTextSize:${rootStyle.getPropertyValue('--messageTextSize').trim()};
        --messageCornerStyle:${rootStyle.getPropertyValue('--messageCornerStyle').trim()};
        --botMessageTextColor:${rootStyle.getPropertyValue('--botMessageTextColor').trim()};
        --botMessageBg:${rootStyle.getPropertyValue('--botMessageBg').trim()};
        --userMessageTextColor:${rootStyle.getPropertyValue('--userMessageTextColor').trim()};
        --userMessageBg:${rootStyle.getPropertyValue('--userMessageBg').trim()};
        --chatInputBackground:${rootStyle.getPropertyValue('--chatInputBackground').trim()};
        --chatInputTextFieldBg:${rootStyle.getPropertyValue('--chatInputTextFieldBg').trim()};
        --chatInputTextFieldTextColor:${rootStyle.getPropertyValue('--chatInputTextFieldTextColor').trim()};
        --chatInputBorderRadius:${rootStyle.getPropertyValue('--chatInputBorderRadius').trim()};
        --iconsDisplay:${rootStyle.getPropertyValue('--iconsDisplay').trim()};
		--iconsColor: ${rootStyle.getPropertyValue('--iconsColor').trim()};
        --buttonTextSize:${rootStyle.getPropertyValue('--buttonTextSize').trim()};
        --buttonFontWeight:${rootStyle.getPropertyValue('--buttonFontWeight').trim()};
        --buttonPadding:${rootStyle.getPropertyValue('--buttonPadding').trim()};
        --chatInputHeight:${rootStyle.getPropertyValue('--chatInputHeight').trim()};
        --avatarSize:${rootStyle.getPropertyValue('--avatarSize').trim()};
        --avatarBorderColor:${rootStyle.getPropertyValue('--avatarBorderColor').trim()};
        --avatarImageURL:${rootStyle.getPropertyValue('--avatarImageURL').trim()};
        --avatarDisplay:${rootStyle.getPropertyValue('--avatarDisplay').trim()};
        --avatarShape:${rootStyle.getPropertyValue('--avatarShape').trim()};
        --otherMessagePaddingLeft:${rootStyle.getPropertyValue('--otherMessagePaddingLeft').trim()};
    }`;

    // Include Footer Settings if Footer is Enabled
    if (footerSettings && footerSettings.showFooter) {
        css += `
        .chat-input:before {
            content: "${footerSettings.footerText}";
            position: absolute;
            bottom: 1px;
            color: ${footerSettings.footerTextColor};
            font-size: ${footerSettings.footerFontSize}px;
            font-family: ${footerSettings.footerFontFamily};
            font-weight: ${footerSettings.footerFontWeight};
            padding: 1px 5px;
			left: 50%;
			transform: translateX(-50%);
			white-space: nowrap;
        }
        .d-flex.align-items-center.w-100 {
            padding-bottom: 2vh;
        }`;
    }

   // Reference Elements
const showIconsCheckbox = document.getElementById('showIcons');
const iconColorInput = document.getElementById('icon-color');

// Function to Apply Icon Visibility and Color Settings
function updateIconSettings() {
    const rootStyle = document.documentElement.style;
    let css = ''; // Variable to store the generated CSS rules

    // Include Icon Styles if Icons are Hidden
    if (showIconsCheckbox && !showIconsCheckbox.checked) {
        // If icons are not visible, hide them
        css += `
        .chat-input .uploadBtt {
            display: none;
        }`;
    } else {
        // If icons are visible, ensure they are visible
        css += `
        .chat-input .uploadBtt {
            display: inline-block;
        }`;
    }

    // Apply Color to Icons
    const iconColor = iconColorInput.value;
    css += `
    path {
        fill: ${iconColor} !important; /* Controls the color of the icons */
    }`;

    // Apply the CSS to the Document
    let styleTag = document.getElementById('iconStyles');
    if (!styleTag) {
        styleTag = document.createElement('style');
        styleTag.id = 'iconStyles';
        document.head.appendChild(styleTag);
    }
    styleTag.innerHTML = css;

    console.log(`Icons ${showIconsCheckbox.checked ? 'visible' : 'hidden'}. Icon color: ${iconColor}`);
}

// Update Icon Settings When the Checkbox or Color Input Changes
showIconsCheckbox.addEventListener('change', updateIconSettings);
iconColorInput.addEventListener('input', updateIconSettings);

// Call the Initial Function to Ensure Default Values
updateIconSettings();


    // Additional Styles
    css += `
    pre {
        color: var(--botMessageTextColor);
        line-height: 1.5;
        padding: 10px;
        font-weight: var(--buttonFontWeight);
        font-size: var(--messageTextSize);
        font-family: var(--fontFamily);
    }
    .chat-header {
        font-size: var(--headerTextSize);
        color: var(--headerTextColor);
        background: var(--headerBackgroundLayers);
        height: var(--headerHeight);
        text-align: var(--headerTextAlign);
        display: flex;
        align-items: center;
        justify-content: var(--headerTextAlign);
        font-family: var(--fontFamily);
        border-top-left-radius: var(--cornerStyle);
        border-top-right-radius: var(--cornerStyle);
        padding-left: var(--headerPaddingLeft);
    }
	 path {
        fill: var(--iconsColor) !important; /* Controla a cor dos ícones */
    }
    .chat-area {
        height: calc(92% - var(--headerHeight));
        position: absolute;
        top: var(--headerHeight);
        flex: 1;
        padding: 0px;
        overflow-y: auto;
        line-height: 1.5;
        font-family: var(--fontFamily);
        background-color: var(--chatAreaBackgroundColor);
        background-image: var(--chatAreaBackgroundImage);
        background-position: var(--chatAreaBackgroundPosition);
        background-repeat: var(--chatAreaBackgroundRepeat);
        background-size: var(--chatAreaBackgroundSize);
    }
    .other-message {
        position: relative;
        margin-bottom: 10px;
        padding-left: var(--otherMessagePaddingLeft);
    }
    .other-message:before {
        content: "";
        display: var(--avatarDisplay);
        position: absolute;
        top: 0;
        left: 0;
        width: var(--avatarSize);
        height: var(--avatarSize);
        background-image: var(--avatarImageURL);
        background-size: cover;
        background-repeat: no-repeat;
        border-radius: var(--avatarShape);
        border: 3px solid var(--avatarBorderColor);
    }
    .other-message .message-text {
        background-color: var(--botMessageBg);
        color: var(--botMessageTextColor);
        font-size: var(--messageTextSize);
        border-radius: var(--messageCornerStyle);
        word-wrap: break-word;
        font-family: var(--fontFamily);
        margin-bottom: 5px;
		padding: 0px 2px;
    }
    .other-message .message-text * {
        color: var(--botMessageTextColor);
    }
    .my-message {
        padding-right: 0;
        margin-bottom: 10px;
        position: relative;
    }
    .my-message .message-text {
        background-color: var(--userMessageBg) !important;
        color: var(--userMessageTextColor);
        font-size: var(--messageTextSize);
        border-radius: var(--messageCornerStyle);
        word-wrap: break-word;
        font-family: var(--fontFamily);
        margin-bottom: 5px;
        margin-top: 5vh;
		padding: 0px 3px;
    }
    .my-message .message-text * {
        color: var(--userMessageTextColor) !important;
    }
    .message-text * {
        font-family: inherit;
    }
    .chat-input {
        height: var(--chatInputHeight);
        padding: 20px;
        background: var(--chatInputBackground);
        display: flex;
        align-items: center;
        width: 100%;
        box-sizing: border-box;
        border-top: none;
        font-family: var(--fontFamily);
    }
    .chat-input .input-group {
        flex: 1;
        border-radius: var(--chatInputBorderRadius) !important;
        background-color: var(--chatInputTextFieldBg) !important;
        overflow: hidden;
        position: relative;
        display: flex;
    }
    .chat-input input {
        width: 100%;
        padding: 10px;
        border: none;
        background-color: var(--chatInputTextFieldBg);
        color: var(--chatInputTextFieldTextColor);
        font-size: 14px;
        outline: none;
        box-sizing: border-box;
        flex: 1;
    }
	.chat-input .form-control {
    	background: var(--chatInputTextFieldBg) !important;
}
    /* Other existing styles ... */

    /* Generated CSS will be placed here */
    `;

    document.getElementById('cssOutput').value = css.trim();
}

// Function to update the preview based on control inputs
function updatePreview() {
    const root = document.documentElement.style;

    // Header Settings
    const headerTextSize = document.getElementById('headerTextSize').value + 'px';
    const headerTextColor = document.getElementById('headerTextColor').value;
    const headerHeightValue = document.getElementById('headerHeight').value;
    const headerHeight = headerHeightValue + 'px';
    const headerTextAlign = document.getElementById('headerTextAlign').value;
    const cornerStyle = document.getElementById('cornerStyle').value;
    let fontFamily = document.getElementById('fontFamily').value;
    const headerBackgroundType = document.getElementById('headerBackgroundType').value;

    root.setProperty('--headerTextSize', headerTextSize);
    root.setProperty('--headerTextColor', headerTextColor);
    root.setProperty('--headerHeight', headerHeight);
    root.setProperty('--headerTextAlign', headerTextAlign);
    root.setProperty('--cornerStyle', cornerStyle);
    root.setProperty('--fontFamily', fontFamily);

    // Update font family and weight in preview elements
    document.querySelectorAll('.preview, .chat-preview-container, .chat-header, .chat-area, .chat-input, .message-text, pre, .card-button').forEach(el => {
        el.style.fontFamily = root.getPropertyValue('--fontFamily').trim();
        el.style.fontWeight = 'bold';
    });

    let headerBackgroundLayer = '';
    if (headerBackgroundType === 'solid') {
        const headerBgSolid = document.getElementById('headerBgSolid').value;
        headerBackgroundLayer = headerBgSolid;
    } else {
        const headerBgGradientStart = document.getElementById('headerBgGradientStart').value;
        const headerBgGradientEnd = document.getElementById('headerBgGradientEnd').value;
        const headerBgGradientDirection = document.getElementById('headerBgGradientDirection').value;
        headerBackgroundLayer = `linear-gradient(${headerBgGradientDirection}, ${headerBgGradientStart}, ${headerBgGradientEnd})`;
    }

    // Header Logo Settings
    const headerLogoURL = document.getElementById('headerLogoURL').value;
    const headerLogoWidth = document.getElementById('headerLogoWidth').value || '40';
    const headerLogoAlignment = document.getElementById('headerLogoAlignment').value || 'left';
    const headerLogoOffsetX = document.getElementById('headerLogoOffsetX').value || '0';
    const headerLogoOffsetY = document.getElementById('headerLogoOffsetY').value || '0';
    let headerBackgroundLayers = '';

    if (headerLogoURL) {
        document.getElementById('headerLogoSizeGroup').style.display = 'block';
        document.getElementById('headerLogoPositionGroup').style.display = 'block';

        let positionX = '';
        if (headerLogoAlignment === 'left') {
            positionX = `calc(${headerLogoOffsetX}px)`;
        } else if (headerLogoAlignment === 'center') {
            positionX = `calc(50% + ${headerLogoOffsetX}px - ${headerLogoWidth / 2}px)`;
        } else if (headerLogoAlignment === 'right') {
            positionX = `calc(100% - ${headerLogoWidth}px - ${headerLogoOffsetX}px)`;
        }

        const positionY = `${headerLogoOffsetY}px`;
        const headerLogoWidthPx = headerLogoWidth + 'px';

        headerBackgroundLayers = `url('${headerLogoURL}') ${positionX} ${positionY} / ${headerLogoWidthPx} no-repeat, ${headerBackgroundLayer}`;
    } else {
        document.getElementById('headerLogoSizeGroup').style.display = 'none';
        document.getElementById('headerLogoPositionGroup').style.display = 'none';
        root.setProperty('--headerPaddingLeft', '20px');
        headerBackgroundLayers = headerBackgroundLayer;
    }
    root.setProperty('--headerBackgroundLayers', headerBackgroundLayers);

    // Chat Area Settings
    const chatAreaBackgroundType = document.getElementById('chatAreaBackgroundType').value;

    if (chatAreaBackgroundType === 'solid') {
        const chatAreaBgSolid = document.getElementById('chatAreaBgSolid').value;
        root.setProperty('--chatAreaBackgroundColor', chatAreaBgSolid);
        root.setProperty('--chatAreaBackgroundImage', 'none');
    } else if (chatAreaBackgroundType === 'gradient') {
        const chatAreaBgGradientStart = document.getElementById('chatAreaBgGradientStart').value;
        const chatAreaBgGradientEnd = document.getElementById('chatAreaBgGradientEnd').value;
        const chatAreaBgGradientDirection = document.getElementById('chatAreaBgGradientDirection').value;
        root.setProperty('--chatAreaBackgroundColor', 'transparent');
        root.setProperty('--chatAreaBackgroundImage', `linear-gradient(${chatAreaBgGradientDirection}, ${chatAreaBgGradientStart}, ${chatAreaBgGradientEnd})`);
        root.setProperty('--chatAreaBackgroundPosition', 'center');
        root.setProperty('--chatAreaBackgroundRepeat', 'no-repeat');
        root.setProperty('--chatAreaBackgroundSize', 'cover');
    } else if (chatAreaBackgroundType === 'image') {
        const chatAreaBgImageURL = document.getElementById('chatAreaBgImageURL').value;
        const chatAreaBgSize = document.getElementById('chatAreaBgSize').value;
        const chatAreaBgRepeat = document.getElementById('chatAreaBgRepeat').value;
        if (chatAreaBgImageURL) {
            root.setProperty('--chatAreaBackgroundColor', 'transparent');
            root.setProperty('--chatAreaBackgroundImage', `url('${chatAreaBgImageURL}')`);
            root.setProperty('--chatAreaBackgroundSize', chatAreaBgSize);
            root.setProperty('--chatAreaBackgroundRepeat', chatAreaBgRepeat);
            root.setProperty('--chatAreaBackgroundPosition', 'center');
        }
    }

    // Message Settings
    const messageTextSizeValue = document.getElementById('messageTextSize').value;
    const messageTextSize = messageTextSizeValue + 'px';
    const messageCornerStyle = document.getElementById('messageCornerStyle').value;
    const botMessageTextColor = document.getElementById('botMessageTextColor').value;
    const botMessageBg = document.getElementById('botMessageBg').value;
    const userMessageTextColor = document.getElementById('userMessageTextColor').value;
    const userMessageBg = document.getElementById('userMessageBg').value;

    root.setProperty('--messageTextSize', messageTextSize);
    root.setProperty('--buttonTextSize', messageTextSize); // Update button text size
    root.setProperty('--messageCornerStyle', messageCornerStyle);
    root.setProperty('--botMessageTextColor', botMessageTextColor);
    root.setProperty('--botMessageBg', botMessageBg);
    root.setProperty('--userMessageTextColor', userMessageTextColor);
    root.setProperty('--userMessageBg', userMessageBg);

    // Font Weight
    root.setProperty('--fontWeight', 'bold'); // Assuming bold as per your instruction

    // Avatar Settings
    const showAvatar = document.getElementById('showAvatar').checked;
    root.setProperty('--avatarDisplay', showAvatar ? 'inline-block' : 'none');
    root.setProperty('--avatarSize', document.getElementById('avatarSize').value + 'px');
    const avatarBorderColor = document.getElementById('avatarBorderColor').value;
    const avatarBorderTransparent = document.getElementById('avatarBorderTransparent').checked;
    root.setProperty('--avatarBorderColor', avatarBorderTransparent ? '0px, transparent' : avatarBorderColor);
    const avatarURL = document.getElementById('avatarImageURL').value;
    root.setProperty('--avatarImageURL', avatarURL ? `url("${avatarURL}")` : 'none');
    root.setProperty('--avatarShape', document.getElementById('avatarShape').value);

    // Adjust other-message padding based on avatar visibility
    if (showAvatar) {
        const avatarSizeValue = document.getElementById('avatarSize').value;
        root.setProperty('--otherMessagePaddingLeft', `calc(${avatarSizeValue}px + 10px)`);
    } else {
        root.setProperty('--otherMessagePaddingLeft', '0px');
    }

    // Icon Settings
const showIcons = document.getElementById('showIcons').checked;
const iconColor = document.getElementById('icon-color').value;

// Applies CSS properties to show or hide the icons
root.setProperty('--iconsDisplay', showIcons ? 'inline-block' : 'none');

// Applies the color to the icons
root.setProperty('--iconsColor', iconColor);

// Debug log
console.log(`Icons are ${showIcons ? 'visible' : 'hidden'}. Icon color: ${iconColor}`);


    // Chat Input Settings
    const chatInputBackgroundType = document.getElementById('chatInputBackgroundType').value;
    const chatInputTextFieldBg = document.getElementById('chatInputTextFieldBg').value;
    const chatInputTextFieldTextColor = document.getElementById('chatInputTextFieldTextColor').value;
    const chatInputCornerStyle = document.getElementById('chatInputCornerStyle').value;

    root.setProperty('--chatInputTextFieldBg', chatInputTextFieldBg);
    root.setProperty('--chatInputTextFieldTextColor', chatInputTextFieldTextColor);
    root.setProperty('--chatInputBorderRadius', chatInputCornerStyle);

    if (chatInputBackgroundType === 'solid') {
        const chatInputBgSolid = document.getElementById('chatInputBgSolid').value;
        root.setProperty('--chatInputBackground', chatInputBgSolid);
    } else {
        const chatInputBgGradientStart = document.getElementById('chatInputBgGradientStart').value;
        const chatInputBgGradientEnd = document.getElementById('chatInputBgGradientEnd').value;
        const chatInputBgGradientDirection = document.getElementById('chatInputBgGradientDirection').value;
        root.setProperty('--chatInputBackground', `linear-gradient(${chatInputBgGradientDirection}, ${chatInputBgGradientStart}, ${chatInputBgGradientEnd})`);
    }

    generateCSS();
    saveSettings(); // Save settings after updating
}

// Element References
const footerShowCheckbox = document.getElementById('footer-show');
const footerTextInput = document.getElementById('footer-text');
const footerTextColorInput = document.getElementById('footer-text-color');
const footerFontSizeInput = document.getElementById('footer-font-size');
const footerFontFamilyInput = document.getElementById('footer-font-family');
const footerFontWeightInput = document.getElementById('footer-font-weight');
const cssOutput = document.getElementById('cssOutput');

// Footer Settings (Initialize with default values)
const footerSettings = {
    showFooter: false,
    footerText: 'Sample Footer Text',
    footerTextColor: '#000000',
    footerFontSize: 14,
    footerFontFamily: 'Arial, sans-serif',
    footerFontWeight: 'normal',
};

// Update CSS and Preview
function updateFooterSettings() {
    // Update Footer settings object
    footerSettings.showFooter = footerShowCheckbox.checked;
    footerSettings.footerText = footerTextInput.value;
    footerSettings.footerTextColor = footerTextColorInput.value;
    footerSettings.footerFontSize = footerFontSizeInput.value;
    footerSettings.footerFontFamily = footerFontFamilyInput.value;
    footerSettings.footerFontWeight = footerFontWeightInput.value;

    // Generate Footer CSS
let footerCSS = '';
if (footerSettings.showFooter) {
    footerCSS = `
        .chat-input:before {
            content: "${footerSettings.footerText}";
            position: absolute;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            color: ${footerSettings.footerTextColor};
            font-size: ${footerSettings.footerFontSize}px;
            font-family: ${footerSettings.footerFontFamily};
            font-weight: ${footerSettings.footerFontWeight};
            text-align: center;
            white-space: nowrap; /* Ensures single-line footer text */
        }
        .d-flex.align-items-center.w-100 {
            padding-bottom: 2vh;
        }
    `;
}

    // Apply the CSS to the preview
    const styleTag = document.getElementById('footerStyles');
    if (styleTag) {
        styleTag.innerHTML = footerCSS.trim();
    } else {
        const newStyleTag = document.createElement('style');
        newStyleTag.id = 'footerStyles';
        newStyleTag.innerHTML = footerCSS.trim();
        document.head.appendChild(newStyleTag);
    }

    // Update Footer CSS Output
    // Optionally, you can append this to the main CSS output or handle it separately
    generateCSS();
}

// Function to save settings to LocalStorage
function saveSettings() {
    const settings = {};
    document.querySelectorAll('.controls input, .controls select, .controls textarea').forEach(input => {
        if (input.type === 'checkbox') {
            settings[input.id] = input.checked;
        } else {
            settings[input.id] = input.value;
        }
    });
    localStorage.setItem('chatCustomizationSettings', JSON.stringify(settings));
}

// Function to load settings from LocalStorage
function loadSettings() {
    const settings = localStorage.getItem('chatCustomizationSettings');
    if (settings) {
        const parsedSettings = JSON.parse(settings);
        document.querySelectorAll('.controls input, .controls select, .controls textarea').forEach(input => {
            if (input.id in parsedSettings) {
                if (input.type === 'checkbox') {
                    input.checked = parsedSettings[input.id];
                } else {
                    input.value = parsedSettings[input.id];
                }
            }
        });

        // After setting values, trigger change events where necessary
        document.getElementById('headerBackgroundType').dispatchEvent(new Event('change'));
        document.getElementById('chatAreaBackgroundType').dispatchEvent(new Event('change'));
        document.getElementById('chatInputBackgroundType').dispatchEvent(new Event('change'));
        document.getElementById('headerLogoURL').dispatchEvent(new Event('input'));

        // Update footer settings
        updateFooterSettings();

        // Trigger the avatar border transparency update by calling updatePreview
        updatePreview();
    }
}

// Function to reset settings to default
function resetSettings() {
    if (confirm('Are you sure you want to reset to default settings?')) {
        localStorage.removeItem('chatCustomizationSettings');
        window.location.reload();
    }
}

// Function to copy CSS to clipboard
function copyCSS() {
    const cssOutput = document.getElementById('cssOutput');
    cssOutput.select();
    cssOutput.setSelectionRange(0, 99999); // For mobile devices
    document.execCommand('copy');

    const successMessage = document.getElementById('successMessage');
    successMessage.style.display = 'block';
    setTimeout(() => { successMessage.style.display = 'none'; }, 2000);
}

// Event Listeners for Footer Inputs
footerShowCheckbox.addEventListener('change', (e) => {
    footerSettings.showFooter = e.target.checked;
    updateFooterSettings();
    generateCSS();
    saveSettings();
});

footerTextInput.addEventListener('input', (e) => {
    footerSettings.footerText = e.target.value;
    updateFooterSettings();
    generateCSS();
    saveSettings();
});

footerTextColorInput.addEventListener('input', (e) => {
    footerSettings.footerTextColor = e.target.value;
    updateFooterSettings();
    generateCSS();
    saveSettings();
});

footerFontSizeInput.addEventListener('input', (e) => {
    footerSettings.footerFontSize = e.target.value;
    updateFooterSettings();
    generateCSS();
    saveSettings();
});

footerFontFamilyInput.addEventListener('change', (e) => {
    footerSettings.footerFontFamily = e.target.value;
    updateFooterSettings();
    generateCSS();
    saveSettings();
});

footerFontWeightInput.addEventListener('change', (e) => {
    footerSettings.footerFontWeight = e.target.value;
    updateFooterSettings();
    generateCSS();
    saveSettings();
});

// Event Listeners for All Inputs to Update Preview and Save Settings
document.querySelectorAll('.controls input, .controls select, .controls textarea').forEach(input => {
    input.addEventListener('input', updatePreview);
    input.addEventListener('change', updatePreview);
});

// Toggle Header Background Options
document.getElementById('headerBackgroundType').addEventListener('change', function() {
    const type = this.value;
    if (type === 'solid') {
        document.getElementById('headerSolidColorGroup').style.display = 'block';
        document.getElementById('headerGradientGroup').style.display = 'none';
    } else {
        document.getElementById('headerSolidColorGroup').style.display = 'none';
        document.getElementById('headerGradientGroup').style.display = 'block';
    }
    updatePreview();
});

// Toggle Chat Area Background Options
document.getElementById('chatAreaBackgroundType').addEventListener('change', function() {
    const type = this.value;
    if (type === 'solid') {
        document.getElementById('chatAreaSolidColorGroup').style.display = 'block';
        document.getElementById('chatAreaGradientGroup').style.display = 'none';
        document.getElementById('chatAreaImageGroup').style.display = 'none';
    } else if (type === 'gradient') {
        document.getElementById('chatAreaSolidColorGroup').style.display = 'none';
        document.getElementById('chatAreaGradientGroup').style.display = 'block';
        document.getElementById('chatAreaImageGroup').style.display = 'none';
    } else if (type === 'image') {
        document.getElementById('chatAreaSolidColorGroup').style.display = 'none';
        document.getElementById('chatAreaGradientGroup').style.display = 'none';
        document.getElementById('chatAreaImageGroup').style.display = 'block';
    }
    updatePreview();
});

// Toggle Chat Input Background Options
document.getElementById('chatInputBackgroundType').addEventListener('change', function() {
    const type = this.value;
    if (type === 'solid') {
        document.getElementById('chatInputSolidColorGroup').style.display = 'block';
        document.getElementById('chatInputGradientGroup').style.display = 'none';
    } else {
        document.getElementById('chatInputSolidColorGroup').style.display = 'none';
        document.getElementById('chatInputGradientGroup').style.display = 'block';
    }
    updatePreview();
});

// Toggle Section Content Visibility and ensure only one is open at a time
document.querySelectorAll('.section-title').forEach(title => {
    title.addEventListener('click', function() {
        const currentlyOpen = document.querySelector('.section-content:not([style*="display: none"])');
        const sectionContent = this.nextElementSibling;
        const toggleIcon = this.querySelector('.toggle-icon');

        if (sectionContent.style.display === 'none' || sectionContent.style.display === '') {
            // Close the currently open section
            if (currentlyOpen && currentlyOpen !== sectionContent) {
                currentlyOpen.style.display = 'none';
                currentlyOpen.previousElementSibling.querySelector('.toggle-icon').textContent = '+';
            }
            // Open the clicked section
            sectionContent.style.display = 'block';
            toggleIcon.textContent = '-';
        } else {
            sectionContent.style.display = 'none';
            toggleIcon.textContent = '+';
        }
    });
});

window.onload = function() {
    loadSettings();
    updatePreview();
};
</script>

</body>
</html>

